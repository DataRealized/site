/*! Copyright 2021 Wayin Inc. All rights reserved. */
!function(e){function __webpack_require__(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,__webpack_require__),i.l=!0,i.exports}var n={};__webpack_require__.m=e,__webpack_require__.c=n,__webpack_require__.i=function(e){return e},__webpack_require__.d=function(e,n,t){__webpack_require__.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:t})},__webpack_require__.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(n,"a",n),n},__webpack_require__.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=3)}([function(e,n,t){"use strict";function AnalyticsOutsideIframe(e,n,a){function syncOutsideIntegrationEvents(e){if(pingAllFrames(),c){var n=c;c=!1,n.forEach(function(e){var n=e[0],t=e[1];sendIntegrationMessage(n,t.event,t.params)})}}function pingAllFrames(){Array.prototype.forEach.call(document.querySelectorAll("iframe[id^=ngxFrame]"),function(e){e.contentWindow.postMessage({id:e.id,target:"ping"},"*")})}function handleVisible(){clearTimeout(s),s=setTimeout(function(e){const n=t.i(o.b)();if(n){const a=t.i(o.c)(),r=t.i(o.d)(),s=t.i(o.e)(n),c=s,l=s+n.height;(c>r&&c<r+a||l>r&&l<r+a)&&(sendIntegrationMessage(n,i.b.APP_VIEWPORT),e?window.detachEvent("scroll",handleVisible):window.removeEventListener("scroll",handleVisible))}},200,r)}function sendIntegrationMessage(e,n,t){var i={id:e?e.id:"",event:n,params:t||{},target:"integration"};if(!1!==c)return void c.push([{id:e.id},i]);if(e){var o=document.getElementById(e.id);o?o.contentWindow.postMessage(i,"*"):console.warn('Unable to find original iframe with id="'+e.id+'" for event:'+n)}}function isValidIntegrationMessage(e){return"object"==typeof e.data&&"integration"===e.data.target}function parseMessage(e){isValidIntegrationMessage(e)&&l.callback(e.data)}function enableListeners(){r?(window.attachEvent("onmessage",parseMessage),window.attachEvent("onscroll",handleVisible)):(window.addEventListener("message",parseMessage,!1),window.addEventListener("scroll",handleVisible,!1)),handleVisible()}function disableListeners(){r?(window.detachEvent("onmessage",parseMessage),window.detachEvent("onscroll",handleVisible)):(window.removeEventListener("message",parseMessage,!1),window.removeEventListener("scroll",handleVisible,!1))}function init(){enableListeners()}function finish(){disableListeners()}const r=t.i(o.a)();for(var s=null,c=[],l=function(e,n){var t={"integration:bus:ready":[syncOutsideIntegrationEvents]};return{api:function(e,n){if(-1===["*"].concat(i.a).indexOf(e))return void console.error('Legacy does not support "'+e+'", only:',i.b);for(var o="*"===e?i.a:[e],a=0;a<o.length;a++){var r=o[a];t[r]=(t[r]||[]).concat([n])}},callback:function(e){t[e.event]&&t[e.event].forEach(function(n){n(Object.assign({id:e.id},e.params),e.event)})}}}(window,a),d={finish:finish,init:init,on:l.api},f=Object.keys(i.b),u=0;u<f.length;u++){var g=f[u];d[g]=i.b[g]}return d.ALL_EVENTS="*",d}n.a=AnalyticsOutsideIframe;var i=t(1),o=t(2)},function(e,n,t){"use strict";const i={ACTION_CONTENT_CLICK:"action:content:click",ACTION_CTA:"action:cta",ACTION_GOAL:"action:goal",ACTION_NEXT:"action:next",ACTION_PREVIOUS:"action:previous",ACTION_SHARE_CAMPAIGN_FACEBOOK:"action:share:campaign:facebook",ACTION_SHARE_CAMPAIGN_PINTEREST:"action:share:campaign:pinterest",ACTION_SHARE_CAMPAIGN_TWITTER:"action:share:campaign:twitter",ACTION_SHARE_CONTENT_FACEBOOK:"action:share:content:facebook",ACTION_SHARE_CONTENT_PINTEREST:"action:share:content:pinterest",ACTION_SHARE_CONTENT_TWITTER:"action:share:content:twitter",ACTION_SHOWMORE:"action:showmore",APP_VIEWPORT:"app:viewport",FLOW_NEXT:"flow:next",FLOW_PREV:"flow:prev",FORM_COPPA_FAILED:"form:coppa:failed",FORM_COPPA_PASSED:"form:coppa:passed",FORM_ENTRY_ALREADYENTERED:"form:entry:alreadyentered",FORM_ENTRY_FAILED:"form:entry:failed",FORM_ENTRY_SUCCESS:"form:entry:success",FORM_MODULE_INTERACTION:"form:module:interaction",FORM_SUBMIT:"form:submit",INSIGHT_CLICKTHROUGH:"insight:clickthrough",INSIGHT_FIRSTINTERACTION:"insight:firstinteraction",NAVIGATE_PAGE:"navigate:page",NAVIGATE_PAGE_CONFIRMATION:"navigate:page:confirmation",VOTE_FAILURE:"vote:failure",VOTE_SUCCESS:"vote:success"};n.b=i;const o=["action:content:click","action:cta","action:goal","action:next","action:previous","action:share:campaign:facebook","action:share:campaign:pinterest","action:share:campaign:twitter","action:share:content:facebook","action:share:content:pinterest","action:share:content:twitter","action:showmore","app:viewport","flow:next","flow:prev","form:coppa:failed","form:coppa:passed","form:entry:alreadyentered","form:entry:failed","form:entry:success","form:module:interaction","form:submit","insight:clickthrough","insight:firstinteraction","navigate:page","navigate:page:confirmation","vote:failure","vote:success"];n.a=o},function(e,n,t){"use strict";function isInternetExplorer(){return!window.addEventListener}function findNGXIframe(){for(var e=[],n=document.getElementsByTagName("iframe"),t=0;t<n.length;t++)0===n[t].id.indexOf("ngxFrame")&&e.push(n[t]);return e[0]}function getClientHeight(){return Math.max(document.documentElement.clientHeight,window.innerHeight||0)}function getScrollTop(){return void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}function getOffsetTop(e){if(!e)return 0;var n=0;if(e.offsetParent){do{n+=e.offsetTop}while(e=e.offsetParent);return n}}n.a=isInternetExplorer,n.b=findNGXIframe,n.c=getClientHeight,n.d=getScrollTop,n.e=getOffsetTop},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t(0),o=o||{};!function(){function CustomEvent(e,n){n=n||{bubbles:!1,cancelable:!1,detail:null};var t=document.createEvent("CustomEvent");return t.initCustomEvent(e,n.bubbles,n.cancelable,n.detail),t}if("function"==typeof window.CustomEvent)return!1;CustomEvent.prototype=window.Event.prototype,window.CustomEvent=CustomEvent,"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,n){if(null===e||void 0===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),i=1;i<arguments.length;i++){var o=arguments[i];if(null!==o&&void 0!==o)for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(t[a]=o[a])}return t},writable:!0,configurable:!0})}(),o.Embed=function(e,n){function integrationHello(e,n){void 0!==e&&"function"==typeof e.CustomEvent&&e.dispatchEvent(new CustomEvent("ngx:integration:response",{detail:{id:n,NGX:o}}))}function isVersion(e){return""+e=="1"}function isValidMessage(e){return"string"==typeof e.data&&0===e.data.indexOf("_NGX_")}function parentClick(e){_({id:findNGXIframe().id,action:"triggerEvent",payload:{event:"parent:event:click"}})}function receiveMessage(e,n){if(isValidMessage(n)){var t;try{t=JSON.parse(n.data.substring(5))}catch(n){return void console.error("Unable to deserialise message JSON",n)}if(t&&t.hasOwnProperty("callbackId")){var i=t.callbackId;if(a.hasOwnProperty(i)&&"function"==typeof a[i])try{a[i].call(this,t.payload),delete a[i]}catch(n){console.error("Failed while running message.callbackId",n)}}var o=messageAction(e,t);o&&n.source.postMessage(o,"*")}}function messageAction(e,t){var i=function(e){var t,i,o,a,r,s,c=e.id;return!!c&&(t=c.substring(8),i=t.split(":"),o=i[0],a=i[1],(r=n.getElementById("ngxFrame"+o))?r:!!(s=n.getElementById("ngxFrame"+a))&&s)}(t)||findNGXIframe();if("event"===t.action){e(t);var a={};o.Embed.eventHandlers.hasOwnProperty(t.event.toLowerCase())&&(a=o.Embed.eventHandlers[t.event.toLowerCase()].call(this,t.event,t.payload,t.msgId)||{}),a.callbackId=t.msgId,a.id=t.id;try{var r="_NGX_"+JSON.stringify(a);i.contentWindow.postMessage(r,"*")}catch(e){console.error("Failed to serialize and send message to iframe's parent context",e)}}else if(f.hasOwnProperty(t.action.toLowerCase()))try{return f[t.action.toLowerCase()].call(this,i,t)}catch(e){return void console.error('Message initiated Action "'+t.action.toLowerCase()+'" failed',e)}}function findNGXIframe(){for(var e=[],t=n.getElementsByTagName("iframe"),i=0;i<t.length;i++)0===t[i].id.indexOf("ngxFrame")&&e.push(t[i]);return e[0]}function init(){o.Embed.listen()}var a={},r=null,s=null,c=function(e){var n=0;if(e.offsetParent){do{n+=e.offsetTop}while(e=e.offsetParent);return n}},l=function(){return Math.max(n.documentElement.clientHeight,e.innerHeight||0)},d=function(){return void 0!==e.pageYOffset?e.pageYOffset:(n.documentElement||n.body.parentNode||n.body).scrollTop},f={getpageinfo:function(n,t){var i={action:"returnpageinfo",callbackId:t.msgId,payload:{clientHeight:l(),scrollTop:d(),offsetTop:c(n),innerHeight:e.innerHeight,url:e.location.href}};return"_NGX_"+JSON.stringify(i)},broadcast:function(e,n){var t={action:"returninfo",callbackId:n.msgId,payload:{}};return"_NGX_"+JSON.stringify(t)},scrollto:function(n,t){e.scrollTo(t.payload.left||0,t.payload.top||0)},resize:function(e,n){n.payload.hasOwnProperty("height")&&(e.height=n.payload.height)}},u=function(n,t){var i=receiveMessage.bind(null,n);e.addEventListener?(e.addEventListener("message",i,!1),e.addEventListener("click",parentClick,!1)):(e.attachEvent("onmessage",i),e.attachEvent("onclick",parentClick)),t.init(),g()},g=function(){m=m.bind(null,!e.addEventListener),e.addEventListener?(e.addEventListener("scroll",v),e.addEventListener("scroll",m)):e.attachEvent("onscroll",v)},p=function(n,t){var i=receiveMessage.bind(null,n);e.removeEventListener?(e.removeEventListener("message",i,!1),e.removeEventListener("click",parentClick,!1),e.removeEventListener("scroll",v,!1),e.removeEventListener("scroll",m,!1)):(e.detachEvent("onmessage",i),e.detachEvent("onclick",parentClick),e.detachEvent("onscroll",v),e.detachEvent("onscroll",m)),t.finish()},v=function(e){clearTimeout(r),r=setTimeout(function(){var e=findNGXIframe(),n={id:e.id,action:"triggerEvent",payload:{event:"parent:event:scroll",clientHeight:l(),scrollTop:d(),offsetTop:c(e)}};_(n)},200)},m=function(n,t){clearTimeout(s),s=setTimeout(function(n){var t=findNGXIframe(),i=l(),o=d(),a=c(t),r=a,s=a+t.height;(r>o&&r<o+i||s>o&&s<o+i)&&(_({id:t.id,action:"triggerEvent",payload:{event:"app:viewport"}}),n?e.detachEvent("scroll",m):e.removeEventListener("scroll",m))},200,n)},_=function(e,t){if("object"==typeof e){e.msgId=Date.now(),"function"==typeof t&&(a[e.msgId]=t);return n.getElementById(e.id).contentWindow.postMessage("_NGX_"+JSON.stringify(e),"*")}},E=function(e,n){"function"==typeof n&&(o.Embed.eventHandlers[e||"*"]=n)},h=function(e){var n=function(n){var t=n.customerid;e.call(this,t)},t=findNGXIframe();_({id:t.id,action:"getcustomerid",payload:{}},n)},b=function(e,n){var t=findNGXIframe();_({id:t.id,action:"setcustomerid",payload:{customerid:e,customeridtype:n}})},y=function(){return{registerLoginSuccessHandler:function(e){E("auth:login:success",e)},registerLoginFailHandler:function(e){E("auth:login:fail",e)},registerIdentifySuccessHandler:function(e){E("auth:identify:success",e)},registerIdentifyFailHandler:function(e){E("auth:identify:fail",e)},loginUser:function(e,n,t,i){var o=function(e){if(e.success){if("function"==typeof n){var i=e.user;n.call(this,i)}}else if("function"==typeof t){var o=e.error;t.call(this,o)}},a={id:i||findNGXIframe().id,action:"event",event:"auth:login:success",payload:{user:e}};_(a,o)},loginUserFail:function(e,n){var t={id:n||findNGXIframe().id,action:"event",event:"auth:login:fail",payload:{error:e}};_(t)},loginRequired:function(e){var n={id:e||findNGXIframe().id,action:"event",event:"auth:login:required",payload:{}};_(n)},getUser:function(e,n){var t=function(n){var t=n.user;e.call(this,t)},i={id:n||findNGXIframe().id,action:"getuser",payload:{}};_(i,t)},getConfig:function(e,n){var t=function(n){var t=n.config;e.call(this,t)},i={id:n||findNGXIframe().id,action:"getauthconfig",payload:{}};_(i,t)},enableCustom:function(e,n,t){var i=function(e){var t=e.config;n.call(this,t)},o={id:t||findNGXIframe().id,action:"enablecustomauth",payload:{config:e}};_(o,i)}}}(),w=t.i(i.a)(e,n,o),I=function(e,n,t,i){function init(){e.addEventListener("ngx:integration",function(){integrationHello(e,i)}),integrationHello(e,i)}i=i||[0];var o={};return{api:function(e,n,i){switch(e){case"event:listen":o[n]=(i[n]||[]).concat(i);break;case"analytics:listen":t.on(n,i);break;default:console.error('Legacy does not support "'+e+'", only "event:listen" or "analytics:listen".')}},isVersion:isVersion,callback:function(e){o[e.event]&&o[e.event].forEach(function(n){const t={id:e.id};e.params&&(t.params=e.params),n(t)}),o["*"]&&o["*"].forEach(function(n){n({id:e.id},e.event)})},init:init}}(e,o,w);return o.api=I.api,o.isVersion=I.isVersion,{eventHandlers:{},init:init,initIntegrations:I.init,listen:u.bind(null,I.callback,w),ignore:p.bind(null,I.callback,w),actions:f,sendMessage:_,registerEventHandler:E,getCustomerID:h,setCustomerID:b,registerLoginSuccessHandler:y.registerLoginSuccessHandler,registerLoginFailHandler:y.registerLoginFailHandler,registerIdentifySuccessHandler:y.registerIdentifySuccessHandler,registerIdentifyFailHandler:y.registerIdentifyFailHandler,loginUser:y.loginUser,loginUserFail:y.loginUserFail,loginRequired:y.loginRequired,getUser:y.getUser,getAuthConfig:y.getConfig,enableCustomAuth:y.enableCustom}}(window,document),o.Embed.init(),window.NGX=o,o.Embed.initIntegrations()}]);
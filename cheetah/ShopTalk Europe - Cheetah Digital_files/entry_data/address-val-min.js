$(document).ready(function(){$(".xProfileAddress").prepend('<div class="xAddressError xHidden">Cannot find your address. Please enter your address in the fields below</div>'),$(".xProfileAddress .xCompositeItem-Address1 input").keyup(function(e){if($(".xAddressError").addClass("xHidden"),$(this).val().length>5){var s="d94d6645-ebce-47f7-a049-9ef2a51aad69",d="NZL",r=100,t=0,a=$(this).val();$.ajax({method:"GET",url:"https://api.edq.com/capture/address/v2/search?query="+a+"&country=NZL&take=100&from=0&auth-token=d94d6645-ebce-47f7-a049-9ef2a51aad69"}).done(function(e){if(e.count>0)if($(".xAddressResultContainer").remove(),$(".xCompositeItem-Address1").append('<div class="xAddressResultContainer"><div class="xAddressList"><ul class="xAddressListContainer"></ul></div></div>'),1==e.count&&"No matches"==e.results[0].suggestion)$(".xAddressError").removeClass("xHidden"),$(".xAddressResultContainer").remove();else for(x=0;x<e.count;x++)$(".xAddressListContainer").append('<li data-val="'+e.results[x].format+'" class="xAddressItem">'+e.results[x].suggestion+"</li>");else $(".xAddressError").removeClass("xHidden")}).fail(function(){$(".xAddressError").removeClass("xHidden")})}}),$(".xProfileAddress").delegate(".xAddressItem","click",function(e){var s="d94d6645-ebce-47f7-a049-9ef2a51aad69",d="NZL",r=$(this).attr("data-val"),t;$.ajax({method:"GET",url:r+"&auth-token=d94d6645-ebce-47f7-a049-9ef2a51aad69"}).done(function(e){$(".xAddressResultContainer").remove(),t=e.address,$(".xProfileAddress .xCompositeItem-Address1 input").val(t[0].addressLine1),$(".xProfileAddress .xCompositeItem-Address2 input").val(t[1].addressLine2),$(".xProfileAddress .xCompositeItem-Zip input").val(t[5].postalCode),$(".xProfileAddress .xCompositeItem-City input").val(t[3].locality),$(".xProfileAddress .xCompositeItem-Country input").val(t[6].country),$(".xAddressError").addClass("xHidden")}).fail(function(){$(".xAddressError").removeClass("xHidden")})}),$("html, body").click(function(){$(".xAddressResultContainer").remove()})});